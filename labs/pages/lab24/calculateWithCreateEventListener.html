<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>calculateWithEventListener</title>
    <style type="text/css">
    	#calc {
		 	width: 20em;
		 	padding: 0 0 1em 0;
		 	border-bottom: .3em solid #666;
		}

		.inputFields>label {
		 display: block;
		 margin: 1em 0;
		}

		.reset {
		 margin: 1em 0 0 0;
		}

		#output {
		 font-size: 2em;
		 color: #FF8282
		}
    </style>
</head>
<body>
	<div id="calc">
		<div class="inputFields"><label>Въведете 1 число: <input type="number" name=""></label>
			<label>Въведете 2 число: <input type="number" name=""></label>
		</div>
		<button class="op" id="sum">+</button>
		<button class="op" id="subtract">-</button>
		<button class="op" id="multiply">*</button>
		<button class="op" id="divide">/</button>

		<button class="reset">Reset</button>
	</div>

	<div id="output"></div>
</body>
<script type="text/javascript">
	// взимаме необходимите елементите
	var input1Node = document.querySelector("label:nth-child(1)>input");
	var input2Node = document.querySelector("label:nth-child(2)>input");
	var outputNode = document.getElementById("output");

	var opButtons = document.getElementsByClassName('op');
	var resetButton = document.getElementsByClassName('reset')[0];

	// "закачаме" click за Reset бутона:
	resetButton.addEventListener('click', clearInput);

	// "закачаме" click за всеки бутон за операция:
	for (var i = 0,len = opButtons.length; i < len; i++) {
		opFunction = opButtons[i].getAttribute("id");
		opButtons[i].addEventListener('click', createListener(opFunction) );
	}

	function createListener(f){
		return function calculate(){
			console.log("Calculate is fired!");
			console.log("f=",typeof f);
			var x = getInputValue(input1Node);
			var y = getInputValue(input2Node);

			// във f имаме string, в който е името на функцията, която искаме да извикаме. Поради това я извикваме чрез window[f]
			var result = window[f](x,y);

			outputNode.innerHTML = result;
		}
	}

	// x*1 = x, but converted to Number type
	function sum(x, y) {
		return x*1 + y*1;
	}
	function subtract(x, y) {
		return x*1 - y*1;
	}
	function multiply(x, y) {
		return x*1 * y*1;
	}
	function divide(x, y) {
		return x*1 / y*1;
	}

	function getInputValue(node) {
		return node.value;
	}

	function clearInput() {
		// console.log("clear() is called");
		outputNode.innerHTML = "";
		// input елементите нямат innerHTML !!!
		input1Node.value = "";
		input2Node.value = "";
	}
</script>
</html>